{{ define "share_modal" }}
<div
    x-data="{ open: false, shareUrl: '' }"
    @open-modal.window="open = true; shareUrl = window.location.href + '?nsec=' + getSecretKey(); $nextTick(() => generateQRCode(shareUrl))"
    @keydown.escape.window="open = false"
>
    <div
        x-show="open"
        class="fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center"
        x-transition:enter="ease-out duration-300"
        x-transition:enter-start="opacity-0"
        x-transition:enter-end="opacity-100"
        x-transition:leave="ease-in duration-200"
        x-transition:leave-start="opacity-100"
        x-transition:leave-end="opacity-0"
    >
        <div class="bg-white rounded-lg p-6 max-w-sm w-full">
            <h2 class="text-xl font-semibold mb-4">Share Your Notes</h2>
            <p class="mb-4">Use this unique link to share your notes securely:</p>
            <input
                type="text"
                readonly
                class="w-full p-2 border rounded mb-4"
                x-model="shareUrl"
                @click="$event.target.select()"
            >
            <div class="mb-4 flex justify-center">
                <div id="qrcode"></div>
            </div>
            <div class="flex justify-end">
                <button
                    class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition duration-300 ease-in-out"
                    @click="open = false"
                >
                    Close
                </button>
            </div>
        </div>
    </div>
</div>
{{ end }}